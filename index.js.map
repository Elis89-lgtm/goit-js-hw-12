{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '48862987-6323d91c4dec4b8453f0076b5';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 40) {\n    try {\n        const response = await axios.get(BASE_URL, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n                page,\n                per_page: perPage,\n            },\n        });\n        return response.data;\n    } catch (error) {\n        console.error('Error fetching images:', error);\n        throw error;\n    }\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\nlet lightbox;\n\n\nexport function renderImages(images, isAppend = false) {\n    const markup = images\n    .map(image => `\n        <a href=\"${image.largeImageURL}\" class=\"gallery-item\">\n            <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n            <div class=\"image-info\">\n                <p><strong>Likes:</strong> ${image.likes}</p>\n                <p><strong>Views:</strong> ${image.views}</p>\n                <p><strong>Comments:</strong> ${image.comments}</p>\n                <p><strong>Downloads:</strong> ${image.downloads}</p>\n            </div>\n        </a>\n        \n    `).join('');\n\n    if (isAppend) {\n        gallery.insertAdjacentHTML('beforeend', markup);\n        smoothScroll();\n      } else {\n        gallery.innerHTML = markup;\n      }\n    \n    \n}\n\nexport function clearGallery() {\n    gallery.innerHTML = '';\n}\n\nexport function smoothScroll() {\n    // Отримуємо висоту першої картки галереї\n    const firstCard = gallery.firstElementChild;\n    if (firstCard) {\n      const { height } = firstCard.getBoundingClientRect();\n      window.scrollBy({\n        top: height * 2,\n        behavior: 'smooth',\n      });\n    }\n  }","import { fetchImages } from './js/pixabay-api.js'; \nimport { renderImages, clearGallery, smoothScroll } from './js/render-functions.js';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst lightbox = new SimpleLightbox('.gallery a');\n\n// Посилання на елементи\nconst refs = {\n    formElem: document.querySelector('#search-form'),\n    galleryElem: document.querySelector('.gallery'),\n    loadMoreBtn: document.querySelector('.load-more'),\n    loaderElem: document.querySelector('.loader'),\n};\n\n\n\n// Параметри запиту\nconst params = {\n  query: '',\n  page: 1,\n  perPage: 40,\n  totalHits: 0,\n};\n\n// Обробка сабміту форми\nrefs.formElem.addEventListener('submit', async e => {\n  e.preventDefault();\n\n  const queryInput = e.target.elements.searchQuery;\n  const query = queryInput.value.trim();\n\n  if (!query) {\n    iziToast.error({ title: 'Error', message: 'Please enter a search term!' });\n    return;\n  }\n\n  params.query = query;\n  params.page = 1;\n\n  clearGallery();\n  showLoader();\n  refs.loadMoreBtn.style.display = 'none';\n\n  try {\n    const data = await fetchImages(params.query, params.page, params.perPage);\n    params.totalHits = data.totalHits;\n\n    if (data.hits.length === 0) {\n      iziToast.warning({\n        title: 'No results',\n        message: 'No images found. Try again!',\n      });\n    } else {\n      renderImages(data.hits);\n      lightbox.refresh();\n      if (params.page * params.perPage < params.totalHits) {\n        refs.loadMoreBtn.style.display = 'block';\n      }\n    }\n  } catch (error) {\n    iziToast.error({ title: 'Error', message: 'Something went wrong. Please try again later.' });\n  } finally {\n    hideLoader();\n  }\n\n  queryInput.value = '';\n});\n\nrefs.loadMoreBtn.addEventListener('click', async () => {\n  params.page += 1;\n  showLoader();\n\n  try {\n    const data = await fetchImages(params.query, params.page, params.perPage);\n    renderImages(data.hits,true);\n    lightbox.refresh();\n    smoothScroll();\n\n    if (params.page * params.perPage >= params.totalHits) {\n      refs.loadMoreBtn.style.display = 'none';\n      iziToast.info({ title: 'End', message: \"We're sorry, but you've reached the end of search results.\" });\n    }\n  } catch (error) {\n    iziToast.error({ title: 'Error', message: 'Something went wrong.' });\n  } finally {\n    hideLoader();\n  }\n});\n\n\nfunction showLoader() {\n  refs.loaderElem.style.display = 'block';\n}\n\nfunction hideLoader() {\n  refs.loaderElem.style.display = 'none';\n}\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","axios","error","gallery","renderImages","images","isAppend","markup","image","smoothScroll","clearGallery","firstCard","height","lightbox","SimpleLightbox","refs","params","e","queryInput","iziToast","showLoader","data","hideLoader"],"mappings":"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"}